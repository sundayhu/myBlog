<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript | 个人学习笔记</title>
    <meta name="description" content="纸上得来终觉浅，绝知此事要躬行">
    <link rel="icon" href="/myBlog/favicon.ico">
    
    <link rel="preload" href="/myBlog/assets/css/0.styles.114bd649.css" as="style"><link rel="preload" href="/myBlog/assets/js/app.8d9073dd.js" as="script"><link rel="preload" href="/myBlog/assets/js/2.da0658cd.js" as="script"><link rel="preload" href="/myBlog/assets/js/4.b8a3ef5f.js" as="script"><link rel="prefetch" href="/myBlog/assets/js/3.b111344a.js"><link rel="prefetch" href="/myBlog/assets/js/5.5e9eea53.js"><link rel="prefetch" href="/myBlog/assets/js/6.af34c25c.js"><link rel="prefetch" href="/myBlog/assets/js/7.fdc546c8.js"><link rel="prefetch" href="/myBlog/assets/js/8.b27143ae.js"><link rel="prefetch" href="/myBlog/assets/js/9.92dffb0c.js">
    <link rel="stylesheet" href="/myBlog/assets/css/0.styles.114bd649.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/myBlog/" class="home-link router-link-active"><!----> <span class="site-name">个人学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/myBlog/base/" class="nav-link router-link-active">前端基础</a></div><div class="nav-item"><a href="/myBlog/advance/" class="nav-link">前端进阶</a></div><div class="nav-item"><a href="/myBlog/codeblock/" class="nav-link">一些代码块</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/sundayhu/myBlog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/myBlog/base/" class="nav-link router-link-active">前端基础</a></div><div class="nav-item"><a href="/myBlog/advance/" class="nav-link">前端进阶</a></div><div class="nav-item"><a href="/myBlog/codeblock/" class="nav-link">一些代码块</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">GitHub</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/sundayhu/myBlog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>前端基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/myBlog/base/htmlBasic.html" class="sidebar-link">HTML 基础</a></li><li><a href="/myBlog/base/cssBasic.html" class="sidebar-link">CSS 基础</a></li><li><a href="/myBlog/base/jsBasic.html" class="active sidebar-link">JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#js-基础" class="sidebar-link">JS 基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#变量提升和函数提升" class="sidebar-link">变量提升和函数提升</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#继承与原型链" class="sidebar-link">继承与原型链</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#this-指向" class="sidebar-link">this 指向</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#节流与防抖" class="sidebar-link">节流与防抖</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#类型转换" class="sidebar-link">类型转换</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#尾递归" class="sidebar-link">尾递归</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#new-关键字" class="sidebar-link">new 关键字</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#函数参数" class="sidebar-link">函数参数</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#正则" class="sidebar-link">正则</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#null-与-undefined-的区别" class="sidebar-link">null 与 undefined 的区别</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#dom-事件" class="sidebar-link">DOM 事件</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#严格模式" class="sidebar-link">严格模式</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#一些迷惑的知识点" class="sidebar-link">一些迷惑的知识点</a></li></ul></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#es6-及以上" class="sidebar-link">ES6 及以上</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#let-和-const" class="sidebar-link">let 和 const</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#箭头函数" class="sidebar-link">箭头函数</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#解构赋值和展开运算符" class="sidebar-link">解构赋值和展开运算符</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#promise" class="sidebar-link">Promise</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#set-和-map" class="sidebar-link">set 和 map</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#export-和-import" class="sidebar-link">export 和 import</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#class" class="sidebar-link">Class</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#fetch" class="sidebar-link">fetch</a></li><li class="sidebar-sub-header"><a href="/myBlog/base/jsBasic.html#一些好用的函数" class="sidebar-link">一些好用的函数</a></li></ul></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="javascript"><a href="#javascript" aria-hidden="true" class="header-anchor">#</a> JavaScript</h1> <p></p><div class="table-of-contents"><ul><li><a href="#js-基础">JS 基础</a><ul><li><a href="#变量提升和函数提升">变量提升和函数提升</a></li><li><a href="#继承与原型链">继承与原型链</a></li><li><a href="#this-指向">this 指向</a></li><li><a href="#闭包">闭包</a></li><li><a href="#节流与防抖">节流与防抖</a></li><li><a href="#类型转换">类型转换</a></li><li><a href="#尾递归">尾递归</a></li><li><a href="#new-关键字">new 关键字</a></li><li><a href="#函数参数">函数参数</a></li><li><a href="#正则">正则</a></li><li><a href="#null-与-undefined-的区别">null 与 undefined 的区别</a></li><li><a href="#dom-事件">DOM 事件</a></li><li><a href="#严格模式">严格模式</a></li><li><a href="#一些迷惑的知识点">一些迷惑的知识点</a></li></ul></li><li><a href="#es6-及以上">ES6 及以上</a><ul><li><a href="#let-和-const">let 和 const</a></li><li><a href="#箭头函数">箭头函数</a></li><li><a href="#解构赋值和展开运算符">解构赋值和展开运算符</a></li><li><a href="#promise">Promise</a></li><li><a href="#set-和-map">set 和 map</a></li><li><a href="#export-和-import">export 和 import</a></li><li><a href="#class">Class</a></li><li><a href="#fetch">fetch</a></li><li><a href="#一些好用的函数">一些好用的函数</a></li></ul></li></ul></div><p></p> <h2 id="js-基础"><a href="#js-基础" aria-hidden="true" class="header-anchor">#</a> JS 基础</h2> <h3 id="变量提升和函数提升"><a href="#变量提升和函数提升" aria-hidden="true" class="header-anchor">#</a> 变量提升和函数提升</h3> <p>ES5 中函数及变量的声明都将被提升到函数的最顶部。<code>var</code> 声明的变量允许先使用后声明， 严格模式(<code>strict mode</code>)下则不允许。了解即可，按规范写。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//只会提升声明，赋值不会提示</span>
<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token keyword">function</span> <span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="继承与原型链"><a href="#继承与原型链" aria-hidden="true" class="header-anchor">#</a> 继承与原型链</h3> <h4 id="es5-的面向对象与继承"><a href="#es5-的面向对象与继承" aria-hidden="true" class="header-anchor">#</a> ES5 的面向对象与继承</h4> <p>js 不是面向对象编程，但是可以模拟面向对象：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'张三'</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>面向对象编程的第二大特点是继承，那么 js 如何实现继承呢，有如下 <code>Person</code> 类：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ol><li>通过 <code>prototype</code> 属性实现继承，类的 <code>prototype</code> 属性(也是一个对象)，指向一个父类的实例，具体来说，就是：<code>Student.prototype = new Person()</code>，这样做有一个弊端，就是把 <code>Student</code> 实例的构造函数改成了 <code>Person</code> 的构造函数，用这句代码可以修改：<code>Student.prototype.constructor = Student</code>。</li></ol> <p>父类的不变的属性都可以直接写入 <code>Person.prototype</code>，所以，直接继承 <code>Person.prototype</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">show</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token class-name">Student</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> <span class="token class-name">Person</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="2"><li>对象冒充，也叫构造函数绑定，通过 <code>call</code> 或者 <code>apply</code> 方法，将父对象的构造函数绑定在子对象上</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">Person</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> argument<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">say</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>拷贝继承，严格意义上讲，这个不算继承，就是把父对象的所有属性和方法，拷贝进子对象,至于怎么拷贝，后面会讲对象的深浅拷贝。</li></ol> <h4 id="原型链、prototype-和-proto"><a href="#原型链、prototype-和-proto" aria-hidden="true" class="header-anchor">#</a> 原型链、prototype 和 __proto__</h4> <p><code>prototype</code>，即原型，每个函数都会有一个 <code>prototype</code> 属性。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">=</span>name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age<span class="token operator">=</span>age<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">show</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'张三'</span>，<span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>现在 p 是我们实例化的一个对象，显然，这个对象有一个 <code>show</code> 方法，假如我现在 <code>new</code> 了一百个 <code>Person</code>，这一百个 <code>Person</code> 都有自己的 <code>name</code>、<code>age</code> 属性和 <code>show</code> 方法，但是他们的 <code>show</code> 方法内容是一样的，每个人单独有一份，这样感觉有点浪费资源，那可不可以让这一百个实例化的 <code>Person</code> 共享一份 <code>show</code> 方法呢，答案就是 <code>prototype</code>，每个构造函数有一个 <code>prototype</code> 属性，这个属性包含一个对象（简称&quot;<code>prototype</code> 对象&quot;），所有实例对象需要共享的属性和方法，都放在这个对象里面；那些不需要共享的属性和方法，就放在构造函数里面。</p> <p>说完了 <code>prototype</code>，那么<code>__proto__</code>又是什么呢？简单来说，就是两点：</p> <ol><li>每个对象都具有一个名为 <code>__proto__</code> 的属性；</li> <li>每个对象的 <code>__proto__</code> 属性指向自身构造函数的 <code>prototype</code>。注意：<code>prototype</code> 也是一个对象，所以 <code>prototype</code> 同样带有<code>__proto__</code>属性</li></ol> <p>每个对象都会在其内部初始化一个属性，就是<code>__proto__</code>，当我们访问一个对象的属性时，如果这个对象内部不存在这个属性，那么他就会去<code>__proto__</code>里找这个属性，这个<code>__proto__</code>又会有自己的<code>__proto__</code>，于是就这样一直找下去，也就是我们平时所说的原型链的概念。</p> <p>补充：</p> <ol><li><p><code>hasOwnProperty</code>判断一个对象是否有名称的属性或对象，此方法无法检查该对象的原型链中是否具有该属性，该属性必须是对象本身的一个成员。 如果该属性或者方法是该 对象自身定义的而不是器原型链中定义的 则返回 true;否则返回 false;用法：o<code>bject.hasOwnProperty(proName)</code>;</p></li> <li><p><code>isPrototypeOf</code>是用来判断指定对象<code>object1</code>是否存在于另一个对象<code>object2</code>的原型链中，是则返回 true，否则返回 false。用法：<code>object1.isPrototypeOf(object2)</code>;</p></li></ol> <h3 id="this-指向"><a href="#this-指向" aria-hidden="true" class="header-anchor">#</a> this 指向</h3> <p>函数执行时，当前的方法/变量属于谁，<code>this</code> 就指向谁。<code>var</code> 声明的变量和全局函数属于 <code>window</code> 对象，所以 <code>this</code> 指向 <code>window</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//等价于window.a = 1;</span>
<span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//等价于window.func();</span>
<span class="token comment">//函数执行时，函数属于window对象，所以里面的this也是window</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">注意：箭头函数里面 `this` 的指向总是和函数外部 `this` 一致。 :::</p> <h4 id="bind，apply，call-改变-this-指向"><a href="#bind，apply，call-改变-this-指向" aria-hidden="true" class="header-anchor">#</a> bind，apply，call 改变 this 指向</h4> <p>在 js 中有一些特殊的对象，叫做类数组，可以通过索引访问元素，并且拥有 <code>length</code> 属性，但是没有数组的其他方法，例如 <code>push</code> 、 <code>forEach</code> 、<code>indexOf</code> 等，常见类数组：</p> <ol><li>函数的参数集合：<code>arguments</code></li> <li>由 <code>Node.childNodes</code> 和 <code>document.querySelectorAll</code> 返回的<code>NodeList</code>（可以使用<code>forEach()</code>对其进行迭代）</li> <li><code>input</code> 文件选择器的文件对象：<code>FileList</code></li></ol> <p>如果类数组想调用数组原型上的方法，除了使用展开运算符或<code>Array.from()</code>将类数组转换成数组外，还可以改变 <code>this</code> 指向，直接调用：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arrayLike <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token number">0</span><span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span> <span class="token string">'age'</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span> <span class="token string">'sex'</span><span class="token punctuation">,</span> length<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//使用[]和Array对象是一样的</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//方法1</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//方法2</span>
<span class="token class-name">Array</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>arrayLike<span class="token punctuation">,</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">////方法3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p><code>bind</code>、<code>apply</code>、<code>call</code> 都可以改变<code>this</code>指向，第一个参数都是绑定的<code>this</code>，区别是 <code>apply</code> 需要将函数的参数以数组的形式传入。<code>call</code>、<code>apply</code> 会立即调用该函数，<code>bind</code> 则是只绑定 <code>this</code>，并不会立即调用。</p> <h3 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h3> <p>计数器的例子：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> counter <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token punctuation">(</span>counter <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> count1 <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第一个计数器</span>
<span class="token function">count1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token function">count1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
<span class="token keyword">var</span> count2 <span class="token operator">=</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//第二个计数器</span>
<span class="token function">count2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//1</span>
<span class="token function">count2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>两个计数器之间单独计数，是因为内部函数（return 的函数）读取了外部函数（count）的变量，导致这些变量的值始终保持在内存中，这就是闭包。即使 <code>count</code> 函数运行完毕，<code>counter</code> 变量也不会被销毁。</p> <p>基于闭包特性，可以实现类的私有变量：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'张三'</span><span class="token punctuation">;</span> <span class="token comment">//私有变量，子类和实例都不能访问到</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">//公有变量，子类和实例都能访问到</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">getName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> name<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">setName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		name <span class="token operator">=</span> value<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">注意：由于闭包会使得函数中的变量都被保存在内存中，内存消耗很大，所以不能滥用闭包，否则会造成网页的性能问题，在 IE 中可能导致内存泄露。解决方法是，在退出函数之前，将不使用的局部变量全部删除。 :::</p> <h3 id="节流与防抖"><a href="#节流与防抖" aria-hidden="true" class="header-anchor">#</a> 节流与防抖</h3> <p>防抖本意是防止用户手抖，操作按钮点了两次(或者多次)，只执行后面一次。</p> <p>防抖场景 2：用户在 <code>input</code> 输入内容之后会发请求到接口，监听 <code>change</code> 事件发送请求，但是如果用户一直在输入，<code>change</code> 事件一直会触发，用户只想要最后一次输入搜索的结果，前面发的请求都是浪费，所以如何判断用户是最后一次输入？办法就是用户在一定时间（比如说 1s）内无输入，就判定用户输入完毕。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 简化版防抖函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">;</span>
		timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>节流场景：监听浏览器滚动事件，如果浏览器一直滚动，就会一直触发，节流就是将短时间内多次触发的事情合并为一次，用户拖拽也一样（拖动会一直触发）</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 简化版节流函数</span>
<span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay <span class="token operator">=</span> <span class="token number">500</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
		flag <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
			flag <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="类型转换"><a href="#类型转换" aria-hidden="true" class="header-anchor">#</a> 类型转换</h3> <p>js 数据类型共 7 种，包括 6 种基本数据类型，分别是 <code>Undefined</code>、<code>Null</code>、<code>String</code> 、<code>Number</code>、<code>Boolean</code>、以及 <code>ES6</code> 新增的数据类型 <code>Symbol</code>，一种复杂数据类型 <code>Object</code>。</p> <p>类型判断：</p> <ul><li>用 <code>typeof</code> 操作符(或者 <code>typeof()</code>函数)来检测变量的数据类型：当数据是 Undefined、String 、Number、Boolean、Symbol 类型时，<code>typeof</code> 会正确的返回数据类型，当数据是 Array、Null、Object 时会返回<code>'object'</code>。</li> <li>判断数组可以用<code>Array.isArray()</code>函数</li> <li><code>instantsof</code>，语法：<code>object instanceof constructor</code>，用来检测 <code>constructor.prototype</code> 是否存在于参数 <code>object</code> 的原型链上。通俗的讲：前面的对象是否是后面类的实例。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
zhangsan <span class="token keyword">instanceof</span> <span class="token class-name">Student</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
zhangsan <span class="token keyword">instanceof</span> <span class="token class-name">Person</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>这点如果有学过 <code>Java</code> 就很好理解，<code>Java</code> 的三大特征：封装、继承、多态。其中多态就是，<code>zhangsan</code>这个实例，既是<code>Student</code>类，也是<code>Person</code>类。</p> <p>数组类型也可以用<code>instanceof</code>判断：<code>[] instanceof Array</code>。</p> <ul><li><code>toString</code> 方法判断，对于 <code>Object</code> 对象，直接调用 <code>toString()</code> 就能返回 <code>[object Object]</code> 。而对于其他对象，则需要通过 <code>call</code> / <code>apply</code> 来调用才能返回正确的类型信息。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object String]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Number]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Boolean]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object Symbol]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Undefined]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Null]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Function]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Date]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Array]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object RegExp]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object Error]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// [object HTMLDocument]</span>
<span class="token class-name">Object</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>window<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[object global] window 是全局对象 global 的引用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>此外还可以通过<code>constructor</code>(构造函数)来判断：<code>new</code> 了哪个类，构造函数就是这个类，不是其父类构造出来的。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">class</span> <span class="token class-name">Student</span> <span class="token keyword">extends</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> zhangsan <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Student</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
zhangsan<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Student<span class="token punctuation">;</span> <span class="token comment">// true</span>
zhangsan<span class="token punctuation">.</span>constructor <span class="token operator">===</span> Person<span class="token punctuation">;</span> <span class="token comment">// false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="所有类型转-boolean"><a href="#所有类型转-boolean" aria-hidden="true" class="header-anchor">#</a> 所有类型转 Boolean</h4> <ul><li>+0、-0、NaN、undefined、null、&quot;&quot;、document.all()转 Boolean 是 false</li> <li>复杂数据类型转 <code>Boolean</code> 都是 true，如：[]、{}</li> <li>逻辑非(!)运算符会将数据先转 <code>Boolean</code>，然后取反</li></ul> <h4 id="所有类型转-number"><a href="#所有类型转-number" aria-hidden="true" class="header-anchor">#</a> 所有类型转 Number</h4> <ul><li><p><code>+</code>（正）号运算符：正号运算符会将其他类型转换成 number，使用的是<code>Number()</code>函数，例如<code>+ true</code>的结果是 1，等价于<code>Number(true)</code>。</p></li> <li><p>除了加法运算符（+）以外的运算符（/，*，-等）都会把运算子自动转成数值：<code>'12' - 1</code>的结果是 11。</p></li> <li><p>关系运算符转 <code>Number</code> 类型： &gt;、&lt;、&gt;=、&lt;=、==、!=、===、!===</p></li></ul> <ol><li>当关系运算符一边有字符串时，会将其数据类型使用 <code>Number</code> 转换，再做比较；</li> <li>当两边都是字符串时，则都转成 <code>Number</code>，注意：此时不是转成对应的数字，而是按照字符串对应的的 <code>unicode</code> 编码转成数字</li> <li>多个字符从左往右进行比较</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'10'</span> <span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true 先转成数字10再比较</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span> <span class="token operator">&gt;</span> <span class="token string">'10'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'3'</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 51</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'10'</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 49</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'abc'</span> <span class="token operator">&gt;</span> <span class="token string">'b'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false 先比较a和b，a和b不等，直接false</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'abc'</span> <span class="token operator">&gt;</span> <span class="token string">'ade'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false，先比较aa，相等，继续比较db，得出结果</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 98</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'d'</span><span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 100</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li><code>Number()</code> 函数将字符串转为数值，比 <code>parseInt()</code>函数严格很多。只要有一个字符无法转成数值，整个字符串就会被转为 <code>NaN</code>，其他类型转数字：</li></ul> <ol><li>true 转换为 1，false 转换为 0。</li> <li>ndefined 转换为 NaN，null 转换为 0。</li> <li>空字符串转为 0，其他字符串：如果可以被解析为数值，则转换为相应的数值：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'324'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 324</span>
<span class="token comment">// 字符串：如果不可以被解析为数值，返回 NaN</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token string">'324abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'42 cats'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><code>Number()</code> 函数的参数是对象时，分为三步：</p> <ol><li>第一步，调用对象自身的 <code>valueOf</code> 方法。如果返回原始类型的值，则直接对该值使用 Number 函数，不再进行后续步骤。</li> <li>第二步，如果 <code>valueOf</code> 方法返回的还是对象，则改为调用对象自身的 <code>toString</code> 方法。如果 <code>toString</code> 方法返回原始类型的值，则对该值使用 <code>Number()</code> 函数，不再进行后续步骤。</li> <li>第三步，如果 <code>toString</code> 方法返回的是对象，就报错。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// NaN</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
<span class="token function">Number</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 返回时间戳</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>其他相关知识：</p> <ul><li><code>Number.isInteger()</code>用来判断一个数值是否为整数。</li> <li>ES6 将全局方法<code>parseInt()</code>和<code>parseFloat()</code>，移植到<code>Number</code>对象上面，行为完全保持不变：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ES5的写法</span>
<span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'12.34'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
<span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'123.45#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123.45</span>

<span class="token comment">// ES6的写法</span>
Number<span class="token punctuation">.</span><span class="token function">parseInt</span><span class="token punctuation">(</span><span class="token string">'12.34'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 12</span>
Number<span class="token punctuation">.</span><span class="token function">parseFloat</span><span class="token punctuation">(</span><span class="token string">'123.45#'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 123.45</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>ES7 新增了一个指数运算符（**，等价于 Math.pow）：<code>2 ** 3 ** 2</code>相当于<code>2 ** (3 \*\* 2)</code></li></ul> <h3 id="尾递归"><a href="#尾递归" aria-hidden="true" class="header-anchor">#</a> 尾递归</h3> <p>下面是一个简单的阶乘递归，执行的时候，需要记录每一步的值，当 n 很大时，这个递归将不可用。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> n <span class="token operator">*</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 120</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>而尾递归的思想是将上一次递归的结果作为参数传给函数，这样不需要记录每一步的值：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">factorial</span><span class="token punctuation">(</span><span class="token parameter">n<span class="token punctuation">,</span> total</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">===</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">return</span> total<span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token function">factorial</span><span class="token punctuation">(</span>n <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">,</span> n <span class="token operator">*</span> total<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">factorial</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 120</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>另外，<code>vue</code> 的组件可以自己调用自己，给组件写 <code>name</code> 属性就行。</p> <h3 id="new-关键字"><a href="#new-关键字" aria-hidden="true" class="header-anchor">#</a> new 关键字</h3> <p><code>new</code> 操作符做了这些事：</p> <ol><li>创建一个空对象</li> <li>将空对象的<code>__proto__</code>属性指向构造函数对象的 <code>prototype</code> 成员对象</li> <li>将构造函数对象的 <code>this</code> 指针替换成空对象，然后调用构造函数</li> <li>考察第三步的返回值，如果无返回值或者返回一个非对象值，则将创建的空对象返回作为新对象；否则将返回值作为新对象返回。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//Person类</span>
<span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> age</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
	<span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">objectFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> Constructor <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">shift</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
	obj<span class="token punctuation">.</span>__proto__ <span class="token operator">=</span> <span class="token class-name">Constructor</span><span class="token punctuation">.</span>prototype<span class="token punctuation">;</span>
	<span class="token keyword">const</span> ret <span class="token operator">=</span> <span class="token function">Constructor</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">return</span> <span class="token keyword">typeof</span> ret <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">?</span> ret <span class="token punctuation">:</span> obj<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">objectFactory</span><span class="token punctuation">(</span>Person<span class="token punctuation">,</span> <span class="token string">'zhangsan'</span><span class="token punctuation">,</span> <span class="token string">'18'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><div class="tip custom-block"><p><code>new</code> 关键字后面函数的括号可以省略，<code>new Date</code> 和 <code>new Date()</code> 是一样的，但是不建议省略</p></div></div></div> <h3 id="函数参数"><a href="#函数参数" aria-hidden="true" class="header-anchor">#</a> 函数参数</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	x<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> y <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//{a:10}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>复杂类型（对象）作为参数是按引用传递的。</p> <h3 id="正则"><a href="#正则" aria-hidden="true" class="header-anchor">#</a> 正则</h3> <p>正则非常强大，但也牺牲了很多的性能，能少用尽量少用（很多时候不得不用）。正则表达式不要背，找到规则最重要。</p> <p>正则中有变量：<code>/str123/</code>假如<code>str</code>是一个变量，这个正则需要这样写:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'test'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RegExp</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">123</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions" target="_blank" rel="noopener noreferrer">正则文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h4 id="常用正则"><a href="#常用正则" aria-hidden="true" class="header-anchor">#</a> 常用正则</h4> <ul><li>中国手机号(宽松), 只要是 13,14,15,16,17,18,19 开头即可</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^1[3-9]\d{9}$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>中国手机号(最宽松), 只要是 1 开头即可</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^1\d{10}$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>邮箱</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^[a-zA-Z0-9.!#$%&amp;'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>二代身份证号(18 位数字),最后一位是校验位,可能为数字或字符 X</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^\d{6}(18|19|20)\d{2}(0\d|10|11|12)([0-2]\d|30|31)\d{3}(\d|X|x)$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>16 进制颜色(#fff/#f1f1f1)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>银行卡号（16 或 19 位）</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^(?:[1-9]{1})(?:\d{15}|\d{18})$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>用户名正则：4 到 16 位（字母，数字，下划线），字母开头</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/^[a-zA-Z]\w{3,15}$/</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h4 id="正则相关函数"><a href="#正则相关函数" aria-hidden="true" class="header-anchor">#</a> 正则相关函数</h4> <ul><li>replace：用来将匹配到的字符串替换成另一个字符串，<a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/String/replace" target="_blank" rel="noopener noreferrer">replace 完整文档<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 字符串小驼峰命名改 - 分隔</span>
<span class="token keyword">function</span> <span class="token function">dash</span><span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token regex">/([A-Z])/g</span><span class="token punctuation">,</span> <span class="token string">'-$1'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>test：在字符串中测试是否匹配的 <code>RegExp</code> 方法，它返回 true 或 false。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token regex">/\w/</span><span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>exec：RegExp 类的方法，写法为：reg.exec(str)，在指定字符串中执行一个搜索匹配，返回一个结果数组或 null。</li> <li>match：String 类的方法，写法为：str.match(reg)，检索返回一个字符串匹配正则表达式的的结果。</li> <li>matchAll：String 类的方法，使用同 match，返回值是 exec 和 match 的结合体。(ES10)</li></ul> <p>exec 和 match 的区别：</p> <ol><li>全局匹配时，match 会返回所有匹配上的内容；而 exec 仅匹配单次匹配上的内容</li> <li>全局匹配且进行多次匹配时，exe 会从上次匹配结束的下一位开始匹配，返回本次匹配上的内容，直至无可以匹配的内容，返回 null</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> str <span class="token operator">=</span> <span class="token string">'aaa bbb ccc'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> reg <span class="token operator">=</span> <span class="token regex">/\b\w+\b/g</span><span class="token punctuation">;</span> <span class="token comment">//g:全局匹配</span>
<span class="token keyword">const</span> res_match1 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res_match2 <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res_matchAll <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">matchAll</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res_exec1 <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> res_exec2 <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'match1:'</span><span class="token punctuation">,</span> res_match1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//['aaa','bbb','ccc']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'match2:'</span><span class="token punctuation">,</span> res_match1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//['aaa','bbb','ccc']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'exec1:'</span><span class="token punctuation">,</span> res_exec1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//['aaa']</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'exec2:'</span><span class="token punctuation">,</span> res_exec2<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//['bbb']，从上次匹配的结果处开始匹配</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'res_matchAll:'</span><span class="token punctuation">,</span> res_matchAll<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[['aaa'],['bbb'],['ccc']]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="null-与-undefined-的区别"><a href="#null-与-undefined-的区别" aria-hidden="true" class="header-anchor">#</a> null 与 undefined 的区别</h3> <p><code>null</code> 表示一个空对象，此处不应该有值。<code>undefined</code> 表示未定义（不存在），此处应该有值但是缺少了，js 是一门动态类型语言，成员除了表示存在的空值外，还有可能根本就不存在（因为存不存在只在运行时才知道），这就是 <code>undefined</code> 的意义所在。其他的区别：</p> <ol><li>null 转为数值时为 0；undefined 转为数值时为 NaN</li> <li>判断时 null==undefined 结果为 true，null===undefined 结果为 false</li> <li>typeof undefined 结果为 undefined，.typeof null 结果为 Object</li></ol> <p><code>undefined</code>典型用法是：</p> <ol><li>变量被声明了，但没有赋值时，就等于 undefined。</li> <li>调用函数时，应该提供的参数没有提供，该参数等于 undefined。</li> <li>对象没有赋值的属性，该属性的值为 undefined。</li> <li>函数没有返回值时，默认返回 undefined。</li></ol> <p><code>null</code>典型用法是：</p> <ol><li>作为函数的参数，表示该函数的参数不是对象。</li> <li>作为对象原型链的终点。</li></ol> <p><code>undefined</code>使用注意：</p> <ol><li>由于 undefined 不是关键字，因此有些老的浏览器可以修改全局 undefined 值：</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token comment">// 在chrome中显示undefined</span>
<span class="token comment">// 在 IE 8 中显示10</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="2"><li>undefined 其实是一个全局对象的属性也就是一个全局变量，在 ES5 中 undefined 是个只读的值，但是局部变量仍然可以修改</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> <span class="token keyword">undefined</span> <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 输出了10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>既然局部<code>undefined</code>可被重写，那么意味着<code>a === undefined</code>这样的判断不再绝对安全，我们可以用<code>void</code>函数替代<code>undefined</code>。</p> <p><code>void</code> 后面跟上一个表达式，返回的都是 <code>undefined</code>。用 <code>void 0</code> 代替 <code>undefined</code> 能节省不少字节的大小，事实上，不少 js 压缩工具在压缩过程中，正是将 <code>undefined</code> 用 <code>void 0</code> 代替掉了。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">void</span> <span class="token number">0</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// undefined 不用担心被重写了。</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="dom-事件"><a href="#dom-事件" aria-hidden="true" class="header-anchor">#</a> DOM 事件</h3> <p>React、Vue、Angular 三大框架流行之后，我们直接操作 DOM 的时候变得更少了，但是 DOM 基础知识还是需要了解的。</p> <h4 id="dom-事件流"><a href="#dom-事件流" aria-hidden="true" class="header-anchor">#</a> DOM 事件流</h4> <p>事件就是文档或浏览器窗口中发生的一些特定的交互瞬间，而事件流(又叫事件传播)描述的是从页面中接收事件的顺序。</p> <ul><li>事件冒泡</li></ul> <p>事件冒泡(event bubbling)，即事件开始时由最具体的元素(文档中嵌套层次最深的那个节点)接收，然后逐级向上传播到较为不具体的节点。</p> <ul><li>事件捕获</li></ul> <p>事件捕获的思想是根节点应该更早接收到事件，而最具体的节点应该最后接收到事件。事件捕获的用意在于在事件到达预定目标之前就捕获它。</p> <p>在事件捕获过程中，<code>document</code> 对象首先接收到 <code>click</code> 事件，然后事件沿 DOM 树依次向下，一直传播到事件的实际目标。</p> <p><img src="/myBlog/assets/img/dom_event.276c91e0.png" alt="dom事件流"></p> <h4 id="dom-事件委托"><a href="#dom-事件委托" aria-hidden="true" class="header-anchor">#</a> DOM 事件委托</h4> <p>事件委托就是利用事件冒泡，只指定一个事件处理程序，就可以管理某一类型的所有事件. 在绑定大量事件的时候往往选择事件委托。</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>parent<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>one<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>two<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>three<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
	...
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>text/javascript<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
	<span class="token comment">//父元素</span>
	<span class="token keyword">var</span> parent <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'parent'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//父元素绑定事件，代理子元素的点击事件</span>
	parent<span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">var</span> event <span class="token operator">=</span> event <span class="token operator">||</span> window<span class="token punctuation">.</span>event<span class="token punctuation">;</span>
		<span class="token keyword">var</span> curTarget <span class="token operator">=</span> event<span class="token punctuation">.</span>target <span class="token operator">||</span> event<span class="token punctuation">.</span>srcElement<span class="token punctuation">;</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span>curTarget<span class="token punctuation">.</span>tagName<span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">//事件处理</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>优点:</p> <ul><li>节省内存占用，减少事件注册</li> <li>新增子对象时无需再次对其绑定事件，适合动态添加元素。</li></ul> <p>局限性:</p> <ul><li>focus、blur 之类的事件本身没有事件冒泡机制，所以无法委托</li> <li>mousemove、mouseout 这样的事件，虽然有事件冒泡，但是只能不断通过位置去计算定位，对性能消耗高，不适合事件委托</li></ul> <h3 id="严格模式"><a href="#严格模式" aria-hidden="true" class="header-anchor">#</a> 严格模式</h3> <p>严格模式主要有以下限制：</p> <ul><li>变量必须声明后再使用</li> <li>函数的参数不能有同名属性，否则报错</li> <li>不能使用 with 语句</li> <li>不能对只读属性赋值，否则报错</li> <li>不能使用前缀 0 表示八进制数，否则报错</li> <li>不能删除不可删除的属性，否则报错</li> <li>不能删除变量 delete prop，会报错，只能删除属性 delete global[prop]</li> <li>eval 不会在它的外层作用域引入变量</li> <li>eval 和 arguments 不能被重新赋值</li> <li>arguments 不会自动反映函数参数的变化</li> <li>不能使用 arguments.callee</li> <li>不能使用 arguments.caller</li> <li>禁止 this 指向全局对象</li> <li>不能使用 fn.caller 和 fn.arguments 获取函数调用的堆栈</li> <li>增加了保留字（比如 protected、static 和 interface）</li></ul> <h3 id="一些迷惑的知识点"><a href="#一些迷惑的知识点" aria-hidden="true" class="header-anchor">#</a> 一些迷惑的知识点</h3> <h4 id="typeof-1-0"><a href="#typeof-1-0" aria-hidden="true" class="header-anchor">#</a> typeof 1/0</h4> <p>结果是<code>NaN</code>，原因在于<code>typeof</code>优先级高于除法运算，先计算<code>typeof 1</code>，结果是字符串'number'，然后进行除法运算，结果就是 NaN。</p> <p><code>typeof</code>运算其实也可以用函数<code>typeof()</code>，两者是一样的，而写成函数就会更清晰</p> <p>另外，1/0 在 js 计算中不会报错（Java 会），结果是无穷大：<code>infinite</code>，<code>infinite</code>也是个数字</p> <h4 id=""><a href="#" aria-hidden="true" class="header-anchor">#</a> {} + []</h4> <p>结果是 0，为什么会这样呢，因为<code>{}</code>被解析器当成一个代码块，而不是 js 的空对象，所以等价于<code>+[]</code>，<code>+</code>正号运算符使用的是<code>Number()</code>，而<code>Number([])</code>的结果是 0。</p> <p>若题目变成这样<code>({})+[]</code>，则结果是<code>&quot;[object Object]&quot;</code>，这个时候<code>{}</code>是被当成一个空对象解析的，两个对象相加，则是先调用<code>toString</code>方法转成字符串，<code>({}).toString()</code>结果是<code>&quot;[object Object]&quot;</code>，<code>[].toString()</code>是空字符串，两者相加就是<code>&quot;[object Object]&quot;</code>。</p> <p>另外，<code>Object.create(null)</code>会创建一个真正意义上的空对象，无原型，直接<code>a = {}</code>创建的对象是有原型的.</p> <h4 id="_0-1-0-2-0-3"><a href="#_0-1-0-2-0-3" aria-hidden="true" class="header-anchor">#</a> 0.1 + 0.2 !== 0.3</h4> <p>计算机只能表示 0 和 1，所以所有数字都会先转成二进制再存储。JS 中的 Number 类型使用的是双精度浮点型，也就是其他语言中的 double 类型。而双精度浮点数使用 64 bit 来进行存储，结构图如下：</p> <p><img src="/myBlog/assets/img/number.81f84616.jpg" alt="number"></p> <p>也就是说一个 Number 类型的数字在内存中会被表示成：</p> <p><img src="data:image/png;base64,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" alt="chart"></p> <ol><li>(-1)^s 表示符号位，当 s=0，V 为正数；当 s=1，V 为负数。</li> <li>M 表示有效数字，大于等于 1，小于 2。</li> <li>2^E 表示指数位。</li></ol> <p>举例来说，十进制的 5.0，写成二进制是 101.0，相当于 1.01×2^2。那么，按照上面 V 的格式，可以得出 s=0，M=1.01，E=2。十进制的-5.0，写成二进制是-101.0，相当于-1.01×2^2。那么，s=1，M=1.01，E=2。</p> <p>前面说过，1≤M&lt;2，也就是说，M 可以写成 1.xxxxxx 的形式，其中 xxxxxx 表示小数部分。IEEE 754 规定，在计算机内部保存 M 时，默认这个数的第一位总是 1，因此可以被舍去，只保存后面的 xxxxxx 部分。比如保存 1.01 的时候，只保存 01，等到读取的时候，再把第一位的 1 加上去。这样做的目的，是节省 1 位有效数字。所以，js 最大安全数是 <code>Number.MAX_SAFE_INTEGER === Math.pow(2,53) - 1</code>, 而不是<code>Math.pow(2,52) - 1</code>。</p> <p>至于指数 E，情况就比较复杂。</p> <p>首先，E 为一个无符号整数（unsigned int）。这意味着，如果 E 为 8 位，它的取值范围为 0~255；如果 E 为 11 位，它的取值范围为 0~2047。但是，我们知道，科学计数法中的 E 是可以出现负数的，但是负数没法表示，所以 IEEE 754 规定，E 的真实值必须再减去一个中间数，对于 8 位的 E，这个中间数是 127；对于 11 位的 E，这个中间数是 1023。</p> <p>比如，2^10 的 E 是 10，所以保存成 32 位浮点数时，必须保存成 10+127=137，即 10001001。</p> <p>然后，指数 E 还可以再分成三种情况：</p> <p>（1）E 不全为 0 或不全为 1。这时，浮点数就采用上面的规则表示，即指数 E 的计算值减去 127（或 1023），得到真实值，再将有效数字 M 前加上第一位的 1。</p> <p>（2）E 全为 0。这时，浮点数的指数 E 等于 1-127（或者 1-1023），有效数字 M 不再加上第一位的 1，而是还原为 0.xxxxxx 的小数。这样做是为了表示 ±0，以及接近于 0 的很小的数字。</p> <p>（3）E 全为 1。这时，如果有效数字 M 全为 0，表示 ± 无穷大（正负取决于符号位 s）；如果有效数字 M 不全为 0，表示这个数不是一个数（NaN）。</p> <p>那么 0.1 转二进制是多少呢？</p> <p>一个数的小数部分，乘以 2，然后取整数部分的结果，再用计算后的小数部分重复计算，直到小数部分为 0 。</p> <table><thead><tr><th style="text-align:center;">小数</th> <th style="text-align:center;">x2 的结果</th> <th style="text-align:center;">整数部分</th></tr></thead> <tbody><tr><td style="text-align:center;">0.1</td> <td style="text-align:center;">0.2</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.2</td> <td style="text-align:center;">0.4</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.4</td> <td style="text-align:center;">0.8</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.8</td> <td style="text-align:center;">1.6</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0.6</td> <td style="text-align:center;">1.2</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0.2</td> <td style="text-align:center;">0.4</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.4</td> <td style="text-align:center;">0.8</td> <td style="text-align:center;">0</td></tr> <tr><td style="text-align:center;">0.8</td> <td style="text-align:center;">1.6</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">0.6</td> <td style="text-align:center;">1.2</td> <td style="text-align:center;">1</td></tr> <tr><td style="text-align:center;">...</td> <td style="text-align:center;">...</td> <td style="text-align:center;">...</td></tr></tbody></table> <p>0.1 的二进制表示为 0.0001100110011...(无限重复 0011)。同理 0.2 的二进制表示为 0.001100110011...(无限重复 0011)</p> <p>由于存储尾数位数限制，需要将后面多余的位截掉。所以导致了精度的缺失。</p> <p>如何解决精度丢失：</p> <ol><li>简单的直接保留两位小数</li> <li>转成字符串计算，但是乘法和除法麻烦</li> <li>借助第三方库 mathjs</li></ol> <h2 id="es6-及以上"><a href="#es6-及以上" aria-hidden="true" class="header-anchor">#</a> ES6 及以上</h2> <h3 id="let-和-const"><a href="#let-和-const" aria-hidden="true" class="header-anchor">#</a> let 和 const</h3> <p><code>let</code> 命令，用来声明变量。它的用法类似于 <code>var</code>，但是所声明的变量，只在 <code>let</code> 命令所在的代码块内有效</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	a<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
a<span class="token punctuation">[</span><span class="token number">6</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>特点：</p> <ol><li>不存在变量提升</li> <li>暂时性死区：只要块级作用域内存在 let 命令，它所声明的变量就“绑定”（binding）这个区域，不再受外部的影响。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> tmp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	tmp <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span> <span class="token comment">// ReferenceError</span>
	<span class="token keyword">let</span> tmp<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="3"><li>不允许重复声明: let 不允许在相同作用域内，重复声明同一个变量</li> <li>let 声明的全局变量不再属于 window 对象（node 环境是 global 对象）</li></ol> <p><code>const</code> 和 <code>let</code> 属性一样，只不过声明的是一个只读的常量。一旦声明，常量的值就不能改变，这意味着，声明的时候就必须立即初始化，不能留到以后赋值。</p> <p>对于简单类型的数据（数值、字符串、布尔值），<code>const</code>声明之后，这个变量的值就不能修改。但对于复合类型的数据（主要是对象和数组），不可更改的是这个变量对应的对象的地址，对象本身任然可以修改。如果真的想将对象冻结，应该使用<code>Object.freeze</code>方法。</p> <p>对于不需要修改的值，我们可以都用 <code>const</code> 声明，这样会节省一些性能。</p> <h3 id="箭头函数"><a href="#箭头函数" aria-hidden="true" class="header-anchor">#</a> 箭头函数</h3> <p>箭头函数其实很简单，记住一点：箭头的前面是函数的参数，箭头后面是返回值或执行的代码块（如果用大括号包裹住，就是执行的代码块），执行代码块里面如果没有 <code>return</code>，则会返回<code>undefined</code>。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">num1<span class="token punctuation">,</span> num2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>如果需要返回一个对象，可以这样写：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> newArr <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> index<span class="token punctuation">,</span> name<span class="token punctuation">:</span> item <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>注意点：</p> <ol><li>箭头函数没有 prototype(原型)，所以箭头函数本身没有 this。</li> <li>函数体内的 <code>this</code> 对象，就是定义时所在的对象，而不是使用时所在的对象。所以也不能使用 call，apply，bind 改变函数 <code>this</code> 指向。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'id:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'id:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//等价于外层this</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">;</span>
<span class="token function">foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span> id<span class="token punctuation">:</span> <span class="token number">42</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// id: 42</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ol start="3"><li>不可以当作构造函数，也就是说，不可以使用 <code>new</code> 命令，否则会抛出一个错误。</li> <li>不可以使用<code>arguments</code>对象，该对象在函数体内不存在。如果要用，可以用 <code>rest</code> 参数代替。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">fun</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>arguments</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="4"><li>不可以使用 <code>yield</code> 命令，因此箭头函数不能用作 <code>Generator</code> 函数</li></ol> <h3 id="解构赋值和展开运算符"><a href="#解构赋值和展开运算符" aria-hidden="true" class="header-anchor">#</a> 解构赋值和展开运算符</h3> <h4 id="解构赋值"><a href="#解构赋值" aria-hidden="true" class="header-anchor">#</a> 解构赋值</h4> <p>解构赋值就是将对象（数组）对应位置上的值单独声明，而不用<code>.</code>运算符就能取到</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token punctuation">[</span>foo<span class="token punctuation">,</span> <span class="token punctuation">{</span> bar<span class="token punctuation">,</span> baz <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> bar<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> baz<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">//foo: 1,bar: 2，baz: 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>注意点：</p> <ol><li>允许不完全解构，即等号左边的模式，只匹配一部分的等号右边的对象（数组）。</li> <li>解构不成功，变量的值就等于 <code>undefined</code>。</li> <li>解构赋值时，如果等号右边是数值和布尔值，则会先转为对象。字符串也可以解构赋值。此时，字符串被转换成了一个类似数组的对象</li> <li>函数的参数也可以使用解构赋值，这样就可以很好地判断某个参数的有无。</li> <li>对象的解构也可以指定默认值。默认值生效的条件是，对象的属性值严格等于 <code>undefined</code>。</li></ol> <h4 id="展开运算符"><a href="#展开运算符" aria-hidden="true" class="header-anchor">#</a> 展开运算符</h4> <p>es6 在对象之中，可以直接写变量。这时，属性名为变量名, 属性值为变量的值</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token string">'bar'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span> foo <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//baz的值为 {foo: &quot;bar&quot;}</span>
<span class="token comment">// 等同于</span>
<span class="token keyword">const</span> baz <span class="token operator">=</span> <span class="token punctuation">{</span> foo<span class="token punctuation">:</span> foo <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>展开一个数组</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
arr2<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token operator">...</span>arr1<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[1,2,3,4,5]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol><li>扩展运算符可以与解构赋值结合起来，用于生成数组。</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> list <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// ES6</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span>b<span class="token punctuation">,</span> <span class="token operator">...</span>rest<span class="token punctuation">]</span> <span class="token operator">=</span> list<span class="token punctuation">;</span>
<span class="token comment">// ES5</span>
<span class="token keyword">var</span> a <span class="token operator">=</span> list<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	rest <span class="token operator">=</span> list<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ol start="2"><li>复制数组(浅拷贝)</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> a1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 写法一</span>
<span class="token keyword">const</span> a2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>a1<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// 写法二</span>
<span class="token keyword">const</span> <span class="token punctuation">[</span><span class="token operator">...</span>a2<span class="token punctuation">]</span> <span class="token operator">=</span> a1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ol start="3"><li>合并数组</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'c'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> arr3 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'d'</span><span class="token punctuation">,</span> <span class="token string">'e'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// ES5 的合并数组</span>
arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">,</span> arr3<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// ES6 的合并数组</span>
<span class="token punctuation">[</span><span class="token operator">...</span>arr1<span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">,</span> <span class="token operator">...</span>arr3<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><ul><li>字符串展开</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token string">'hello'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// [ &quot;h&quot;, &quot;e&quot;, &quot;l&quot;, &quot;l&quot;, &quot;o&quot; ]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>对象展开(同数组一样，浅拷贝)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> z <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> b<span class="token punctuation">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> n <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>z <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//n : { a: 3, b: 4 }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="promise"><a href="#promise" aria-hidden="true" class="header-anchor">#</a> Promise</h3> <p>在 <code>Promise</code> 以前，异步操作主要就是靠回调函数，多层异步就会导致回调地狱。</p> <p><code>Promise</code> 对象代表一个异步操作，有三种状态：pending（进行中），fulfilled（已成功）和 rejected（已失败），一旦状态改变，就不会再变。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 一个图片加载的例子</span>
<span class="token keyword">const</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	image<span class="token punctuation">.</span><span class="token function-variable function">onload</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">resolve</span><span class="token punctuation">(</span>image<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	image<span class="token punctuation">.</span><span class="token function-variable function">onerror</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'faild'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	image<span class="token punctuation">.</span>src <span class="token operator">=</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
	<span class="token parameter">img</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'加载成功了'</span><span class="token punctuation">,</span> img<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'加载失败了'</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'出错了'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><ul><li>then 方法返回的是一个新的 Promise 实例（不是原来那个 Promise 实例）。因此可以采用链式写法，即 then 方法后面再调用另一个 then 方法</li> <li>catch 方法用于指定发生错误时的回调函数</li> <li>finally 方法不管 Promise 对象最后状态如何，都会执行的操作（一般用于退出操作，不管退出请求成功还是失败，都会退出到登录页）</li> <li>Promise.resolve 方法可以将现有对象转为 Promise 对象。</li> <li>Promise.reject(reason)方法也会返回一个新的 Promise 实例，该实例的状态为 rejected</li></ul> <h4 id="promise-all-和-promise-race"><a href="#promise-all-和-promise-race" aria-hidden="true" class="header-anchor">#</a> Promise.all 和 Promise.race</h4> <p>这两个方法都是接收一个 <code>Promise</code> 组成的数组为参数，然后返回一个新的 <code>Promise</code>，区别在于：<code>Promise.all</code> 返回的 Promise 对象，只要参数的 <code>Promise</code> 数组里面有一个 <code>rejected</code>（失败）就会 <code>rejected</code>（失败），否则会等所有的 <code>Promise</code> 都 <code>fulfilled</code>（成功）才会返回 <code>fulfilled</code>。而 <code>Promise.race</code> 返回的 <code>Promise</code> 对象，只要参数的 <code>Promise</code> 数组里面有一个率先改变状态，它的状态就跟着改变（状态和参数的 <code>fulfilled</code> 和 <code>rejected</code> 一致）。</p> <p><code>Promise.all</code> 可以用于发多个请求完成之后的回调，但是请求只要有一个失败，这个 <code>Promise</code> 就会失败，但是其他的请求任然会发出。</p> <p><code>Promise.allSettled()</code> （TC39 第 4 阶段草案），这个方法也会返回一个 <code>Promise</code>，但是他会等所有的 <code>Promise</code> 对象都完成（无论成功或失败），返回一个数组，结果是对应的每一个 <code>Promise</code> 的结果</p> <h4 id="async-和-await"><a href="#async-和-await" aria-hidden="true" class="header-anchor">#</a> async 和 await</h4> <p><code>Promise</code> 解决了回调地狱，但是也带来了链式地狱，<code>Promise</code> 返回的值不好取（需要在 <code>Promise</code> 外面定义一个变量，在 <code>then</code> 方法里面赋值）。</p> <p><code>async</code> 和 <code>await</code> 是 <code>Generator</code> 和 <code>yield</code> 的语法糖，让异步代码写起来更新同步代码，缺点是错误处理麻烦（可以用 try/catch）。实际上呢，出错了下面的代码不会执行，也没必要执行，如果非要执行的代码，可以用 <code>finally</code>。</p> <ul><li>async 函数总是会返回一个 Promise。</li> <li>async 函数里面有 await 关键字，会等到异步操作完成，再接着执行（await 关键字只能在 async 函数里面）</li> <li>不要滥用 async 和 await，会阻塞代码执行，只有明确需要先后顺序才用。</li></ul> <h4 id="async-和-await-与-foreach、map-函数"><a href="#async-和-await-与-foreach、map-函数" aria-hidden="true" class="header-anchor">#</a> async 和 await 与 forEach、map 函数</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//以下代码需要babel转码，箭头函数不能用async，为了看得清晰</span>
<span class="token keyword">function</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
	arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token keyword">const</span> arr2 <span class="token operator">=</span> arr<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> res <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">fetch</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> res<span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">fetch</span><span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">resolve</span><span class="token punctuation">(</span>x <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span> <span class="token operator">*</span> x<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>结果是 <code>forEach</code> 的打印是 2，4，6。而 <code>arr2</code> 的值是三个 <code>promise</code>，为啥会这样？<code>forEach</code> 是同步的，同步生成了三个 <code>async</code> 函数，这三个函数里面会 <code>await</code>，而这三个函数之间不会相互 <code>await</code>，所以是三个 <code>Promise</code> 谁执行快谁先打印。而 <code>map</code> 为啥没有按预期的返回呢，是因为 <code>async</code> 函数总是返回 <code>promise</code>，需要 <code>await</code> 这个 <code>async</code> 函数才能拿到结果。</p> <h3 id="set-和-map"><a href="#set-和-map" aria-hidden="true" class="header-anchor">#</a> set 和 map</h3> <p>Set，它类似于数组，但是成员的值都是唯一的，没有重复的值。</p> <ul><li>可用作简单数组去重</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>js 的对象（Object），本质上是键值对的集合，但是传统上只能用字符串当作键。这给它的使用带来了很大的限制。Map 数据结构。它类似于对象，也是键值对的集合，但是“键”的范围不限于字符串，各种类型的值（包括对象）都可以当作键。</p> <h4 id="weakset-和-weakmap"><a href="#weakset-和-weakmap" aria-hidden="true" class="header-anchor">#</a> weakSet 和 weakMap</h4> <p><code>WeakSet</code> 结构与 <code>Set</code> 类似，也是不重复的值的集合。但是，它与 <code>Set</code> 有两个区别。</p> <p>首先，<code>WeakSet</code> 的成员只能是对象，而不能是其他类型的值。</p> <p>其次，<code>WeakSet</code> 中的对象都是弱引用，即垃圾回收机制不考虑 <code>WeakSet</code> 对该对象的引用，也就是说，如果其他对象都不再引用该对象，那么垃圾回收机制会自动回收该对象所占用的内存，不考虑该对象还存在于 <code>WeakSet</code> 之中。</p> <p>类似的，<code>WeakMap</code> 只接受对象作为键名（null 除外），不接受其他类型的值作为键名，<code>WeakMap</code> 的键名所指向的对象，不计入垃圾回收机制。</p> <p>一个典型应用场景是，在网页的 DOM 元素上添加数据，就可以使用 <code>WeakMap</code> 结构。当该 DOM 元素被清除，其所对应的 <code>WeakMap</code> 记录就会自动被移除。</p> <h3 id="export-和-import"><a href="#export-和-import" aria-hidden="true" class="header-anchor">#</a> export 和 import</h3> <ul><li>export 和 import 是 es6 的模块化的概念，export 一个模块(变量，函数)，在另一个文件使用 import 引入。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//a.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'zhangsan'</span><span class="token punctuation">;</span>
<span class="token comment">//b.js //这里{name}使用了es6的解构赋值</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'a.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li>export 多个值:<code>export</code>单个值和多个值的本质都是<code>export {}</code>。</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//a.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'zhangsan'</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">func</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'sex'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 等价于下面这种写法(也建议写成这种写法)：</span>
<span class="token comment">// const name = 'zhangsan';</span>
<span class="token comment">// const const age = 20;</span>
<span class="token comment">// const const func = () =&gt; console.log('sex');</span>
<span class="token comment">// export { name, age, func }</span>
<span class="token comment">//b.js 使用as对变量重新取一个名字</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> name <span class="token keyword">as</span> newName<span class="token punctuation">,</span> age<span class="token punctuation">,</span> func <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'a.js'</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><ul><li>export defalut：import 时可以任意取名，</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 第一组:export defalut输出的模块，import可以任意取名（同时不支持结构赋值）</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 输出</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token keyword">import</span> fun <span class="token keyword">from</span> <span class="token string">'b.js'</span><span class="token punctuation">;</span> <span class="token comment">// 输入时随意取名</span>

<span class="token comment">// 第二组</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 输出</span>
	<span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> func <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'b.js'</span><span class="token punctuation">;</span> <span class="token comment">// 输入时名称保持一致</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>异步 export ：由于 js 限制，无法 export 一个异步结果，但是我们可以 export 这个异步函数，import 之后再处理结果</li></ul> <h3 id="class"><a href="#class" aria-hidden="true" class="header-anchor">#</a> Class</h3> <p><code>class</code> 这块就类似于 <code>Java</code> 了，有 <code>Java</code> 基础的就很好理解（<code>class</code> 只是语法糖，面向对象仍然是基于原型的）</p> <h4 id="class-的基本语法"><a href="#class-的基本语法" aria-hidden="true" class="header-anchor">#</a> class 的基本语法</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">//构造函数</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">=</span> y<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">'('</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">', '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>y <span class="token operator">+</span> <span class="token string">')'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">get</span> <span class="token function">prop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token string">'getter'</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">set</span> <span class="token function">prop</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setter: '</span> <span class="token operator">+</span> value<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h4 id="class-的继承"><a href="#class-的继承" aria-hidden="true" class="header-anchor">#</a> class 的继承</h4> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">ColorPoint</span> <span class="token keyword">extends</span> <span class="token class-name">Point</span> <span class="token punctuation">{</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> color</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">super</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的constructor(x, y)</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">=</span> color<span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>color <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 调用父类的toString()</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="fetch"><a href="#fetch" aria-hidden="true" class="header-anchor">#</a> fetch</h3> <p><code>fetch</code> 与 <code>Ajax</code> 一样，都可以用来发送请求，但是 <code>fetch</code> 并不是 <code>XHR</code> 的升级版本，而是从一个全新的角度来思考的一种设计，<code>fetch</code> 是基于 <code>Promise</code> 语法结构。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//fetch发送json数据</span>
<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'/login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
	method<span class="token punctuation">:</span> <span class="token string">'POST'</span><span class="token punctuation">,</span>
	headers<span class="token punctuation">:</span> <span class="token punctuation">{</span>
		<span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'application/json'</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	body<span class="token punctuation">:</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		name<span class="token punctuation">:</span> <span class="token string">'name'</span><span class="token punctuation">,</span>
		password<span class="token punctuation">:</span> <span class="token string">'password'</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>fetch</code> 与 <code>ajax</code> 主要有两个的不同：</p> <ol><li><p>当接收到一个代表错误的 HTTP 状态码时，从 fetch()返回的 Promise 不会被标记为 reject， 即使该 HTTP 响应的状态码是 404 或 500。相反，它会将 Promise 状态标记为 resolve （但是会将 resolve 的返回值的 ok 属性设置为 false ），仅当网络故障时或请求被阻止时，才会标记为 reject。</p></li> <li><p>默认情况下，fetch 不会从服务端发送或接收任何 cookies。</p></li></ol> <p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Fetch_API" target="_blank" rel="noopener noreferrer">查看更多<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h3 id="一些好用的函数"><a href="#一些好用的函数" aria-hidden="true" class="header-anchor">#</a> 一些好用的函数</h3> <ul><li>Object.is，它用来比较两个值是否严格相等，与严格比较运算符（===）的行为基本一致，但是与<code>===</code>的区别在于：</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token operator">+</span><span class="token number">0</span> <span class="token operator">===</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//true</span>
<span class="token number">NaN</span> <span class="token operator">===</span> <span class="token number">NaN</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// false</span>
Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>Object.assign，用于对象的合并，将源对象（source）的所有可枚举属性，复制到目标对象（target）。语法：<code>Object.assign(target, source1, source2);</code>，注意点：</p> <ol><li>是浅拷贝，也就是说，如果源对象某个属性的值是对象，那么目标对象拷贝得到的是这个对象的引用</li> <li>遇到同名属性，Object.assign 的处理方法是替换，而不是添加。</li> <li>Object.assign 可以用来处理数组，但是会把数组视为对象。</li> <li>如果第一个参数不是对象，则会先转成对象，然后返回。</li> <li>由于 undefined 和 null 无法转成对象，所以如果它们作为第一个参数，就会报错。</li></ol></li> <li><p>Object.keys()，Object.values()，Object.entries()，Object.fromEntries()</p> <ol><li><code>Object.keys()</code>返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumerable）属性的键名。</li> <li><code>Object.values()</code>方法返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumerable）属性的键值。</li> <li><code>Object.entries()</code>方法返回一个数组，成员是参数对象自身的（不含继承的）所有可遍历（enumerable）属性的键值对数组</li> <li><code>Object.fromEntries()</code>方法是<code>Object.entries()</code>的逆操作，用于将一个键值对数组转为对象。（ES10）</li></ol></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//配合URLSearchParams对象，将查询字符串转为对象</span>
Object<span class="token punctuation">.</span><span class="token function">fromEntries</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">URLSearchParams</span><span class="token punctuation">(</span><span class="token string">'foo=bar&amp;baz=qux'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// { foo: &quot;bar&quot;, baz: &quot;qux&quot; }</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li><p>数组实例的flat()方法用于扁平化多维数组（将多维数组拉平为一维），参数是整数，表示想要拉平的层数，默认为1，可以为Infinity（不管有多少层嵌套，都要转成一维数组）。</p></li> <li><p>数组实例的flatMap()方法等价于先map后flat，但是只能拉平一层。</p></li> <li><p>Array.from()方法用于将两类对象转为真正的数组。</p></li> <li><p>Array.of()方法用于将一组值，转换为数组。<code>Array.of(1, 2)</code>结果是<code>[1, 2]</code></p></li> <li><p>数组实例的 find() 和 findIndex()用于查找符合条件的数组项（或索引），这两个函数都接收一个函数参数，indexOf方法无法识别数组的NaN成员，但是findIndex方法可以借助Object.is方法做到。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token number">NaN</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">indexOf</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">)</span><span class="token comment">// -1</span>
<span class="token punctuation">[</span><span class="token number">NaN</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span><span class="token parameter">item</span> <span class="token operator">=&gt;</span> Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span><span class="token punctuation">,</span> item<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token comment">// 0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li><p>数组实例的fill()方法使用给定值，填充一个数组。数组中已有的元素，会被全部抹去。</p></li> <li><p>数组实例的includes()方法返回一个布尔值，表示某个数组是否包含给定的值。</p></li> <li><p>字符串实例的 includes()、startsWith()、endsWith()，分别用于确定一个字符串是否包含在另一个字符串中、开头和结尾。</p></li> <li><p>字符串实例的 repeat()方法返回一个新字符串，表示将原字符串重复 n 次</p></li> <li><p>如果某个字符串不够指定长度，会在头部或尾部补全。padStart()用于头部补全，padEnd()用于尾部补全。</p></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'ababx'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'abax'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'xabab'</span>
<span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padEnd</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">'ab'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'xaba'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ul><li><p>字符串实例的 trim()方法消除字符串开头和结尾的空格，trimStart()消除字符串头部的空格，trimEnd()消除尾部的空格。它们返回的都是新字符串，不会修改原始字符串。</p></li> <li><p>Number.isInteger()用来判断一个数值是否为整数。</p></li> <li><p>Number.isFinite()用来检查一个数值是否为有限的（finite），即不是 Infinity。</p></li> <li><p>Math.trunc()方法用于去除一个数的小数部分，返回整数部分。</p></li> <li><p>Math.sign()方法用来判断一个数到底是正数、负数、还是零。返回值：</p> <ol><li>参数为正数，返回+1；</li> <li>参数为负数，返回-1；</li> <li>参数为 0，返回 0；</li> <li>参数为-0，返回-0;</li> <li>其他值，返回 NaN。</li></ol></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/myBlog/base/cssBasic.html" class="prev">CSS 基础</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/myBlog/assets/js/app.8d9073dd.js" defer></script><script src="/myBlog/assets/js/2.da0658cd.js" defer></script><script src="/myBlog/assets/js/4.b8a3ef5f.js" defer></script>
  </body>
</html>
